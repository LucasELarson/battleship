(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,n=function(t,r){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,"string");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===e(n)?n:String(n)),i)}var n}var r=function(){function e(t,r,o,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.board=[],this.shipCoords=[],this.hitCoords=[],this.missedCoords=[],this.allsunk=!1,this.shipSet=new Set,this.hitSet=new Set,this.missSet=new Set}var r,o;return r=e,(o=[{key:"init",value:function(){for(var e=0;e<10;e++){this.board[e]=[];for(var t=0;t<10;t++)this.board[e].push(!1)}return this.board}},{key:"placeShip",value:function(e,t,r){if(t>=10||this.shipCoords.includes([e,t]))console.log("ship exceeds bounds");else for(var o=0;o<r;o++)e+o<10?(this.shipCoords.push([e+o,t]),this.shipSet.add(Number("".concat(e).concat(t)))):this.placeShip(Math.floor(10*Math.random()),Math.floor(10*Math.random()),r);return this.shipCoords}},{key:"receiveAttack",value:function(e,t){for(var r=0;r<this.shipCoords.length;r++)if(this.shipCoords[r][0]===e&&this.shipCoords[r][1]===t)return this.hitCoords.push([e,t]),this.hitSet.add(Number("".concat(e).concat(t))),this.hitCoords;return this.missedCoords.push([e,t]),this.missSet.add(Number("".concat(e).concat(t))),this.missedCoords}},{key:"allSunk",value:function(){if(this.shipSet.size===this.hitSet.size)return console.log("ALL SHIPS SUNK"),this.allsunk=!0,this.allsunk}}])&&t(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,n=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===o(n)?n:String(n)),i)}var n}var n,s,a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.board=new r,this.turn=!1}var t,o;return t=e,(o=[{key:"isTurn",value:function(e){this.turn=!0,e.turn.set(!1)}},{key:"attack",value:function(e,t,r){return e.board.receiveAttack(t,r)}},{key:"randomPos",value:function(){return[Math.floor(10*Math.random()),Math.floor(10*Math.random())]}},{key:"randomShip",value:function(e){var t=Math.floor(10*Math.random()),r=Math.floor(10*Math.random());if(!1===this.board.placeShip(t,r,e))return!1}},{key:"randomFleet",value:function(){for(var e=0;e<2;)!1!==this.randomShip(1)&&e++;for(var t=0;t<2;)!1!==this.randomShip(2)&&t++;for(var r=0;r<2;)!1!==this.randomShip(3)&&r++;for(var o=0;o<2;)!1!==this.randomShip(4)&&o++}}])&&i(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();n=new a,s=new a,n.board.init(),s.board.init(),s.randomFleet(),setTimeout((function(){alert("Blue = Your Ship\nGreen = You Hit\nYello = Miss\nRed = You've Been Hit")}),201),console.log(s.board.shipSet);var l=new Set,d=!1;function u(){var e;e=s.randomPos();for(var t=document.querySelectorAll("td"),r=Number("".concat(e[0]).concat(e[1])),o=0;o<l.size;o++)Array.from(l)[o]===r&&(console.log("that spot has been hit already"),setTimeout((function(){u()}),50));l.add(Number("".concat(e[0]).concat(e[1]))),s.attack(n,e[0],e[1]);for(var i=0;i<n.board.shipCoords.length;i++)if(n.board.shipCoords[i][0]===e[0]&&n.board.shipCoords[i][1]===e[1]){console.log("youve been hit");for(var a=0;a<100;a++)Number(t[a].firstElementChild.id[1])===e[0]&&Number(t[a].firstElementChild.id[2])===e[1]&&(t[a].style.backgroundColor="red",u(),n.board.allSunk())}else for(var d=0;d<100;d++)Number(t[d].firstElementChild.id[1])===n.board.missedCoords[n.board.missedCoords.length-1][0]&&Number(t[d].firstElementChild.id[2])===n.board.missedCoords[n.board.missedCoords.length-1][1]&&(t[d].style.backgroundColor="yellow",console.log("ENEMY MISS"))}setTimeout((function(){var e=document.querySelectorAll("td"),t=document.getElementById("toplace");t.innerHTML=" Place ".concat(s.board.shipSet.size-n.board.shipSet.size);var r=document.getElementById("start");r.addEventListener("click",(function(e){n.board.shipSet.size<s.board.shipSet.size?alert("Please place ".concat(s.board.shipSet.size-n.board.shipSet.size," more ship cells")):(d=!d,r.textContent=!0===d?"THE GAME HAS BEGUN":"START")}));for(var o=function(r){e[r].addEventListener("click",(function(o){if(!1===d)if("clicked"===e[r].getAttribute("id")){e[r].removeAttribute("id","clicked");for(var i=0;i<=n.board.shipSet.size;i++)Number(String(Array.from(n.board.shipSet)[i]).charAt(0))===Number(e[r].firstElementChild.id[1])&&Number(String(Array.from(n.board.shipSet)[i]).charAt(1))===Number(e[r].firstElementChild.id[2])&&n.board.shipSet.delete(Number(String("".concat(Number(String(Array.from(n.board.shipSet)[i]).charAt(0))).concat(Number(String(Array.from(n.board.shipSet)[i]).charAt(1))))));t.innerHTML=" Place ".concat(s.board.shipSet.size-n.board.shipSet.size)}else n.board.shipSet.size>=s.board.shipSet.size?alert("Maximum number of ships placed"):(e[r].setAttribute("id","clicked"),n.board.placeShip(Number(e[r].firstElementChild.id[1]),Number(e[r].firstElementChild.id[2]),1),console.log(n.board.shipSet),n.board.shipSet.size===s.board.shipSet.size?t.innerHTML="READY TO START":t.innerHTML=" Place ".concat(s.board.shipSet.size-n.board.shipSet.size));else console.log("games started, cant change your board now")}))},i=0;i<100;i++)o(i);for(var a=function(r){e[r].addEventListener("click",(function(o){if(!0===d)for(var i=0;i<s.board.shipCoords.length;i++)if(s.board.shipCoords[i][0]===Number(e[r].firstElementChild.id[1])&&s.board.shipCoords[i][1]===Number(e[r].firstElementChild.id[2])){if(e[r].style.backgroundColor="green",t.innerHTML="YOU HIT",console.log("a hit"),n.attack(s,Number(e[r].firstElementChild.id[1]),Number(e[r].firstElementChild.id[2])),!0!==s.board.allSunk())return;alert("YOU WIN!!!")}else i===s.board.shipCoords.length-1&&(console.log("you missed"),e[r].setAttribute("id","missed"),t.innerHTML="YOU MISSED",u())}))},l=100;l<e.length;l++)a(l)}),1)})();